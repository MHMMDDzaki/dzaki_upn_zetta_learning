<div class="container">
  <mat-card>
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
      <h3>User Form</h3>
      <hr />
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Enter your ID number</mat-label>
        <input matInput type="text" placeholder="12da3" formControlName="id" />
        <mat-error
          *ngIf="!signupForm.get('id').valid && signupForm.get('id').touched"
        >
          Please enter a valid ID
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Enter your username</mat-label>
        <input
          matInput
          type="text"
          placeholder="dzaki"
          formControlName="username"
        />
        <mat-error
          *ngIf="
            !signupForm.get('username').valid &&
            signupForm.get('username').touched
          "
        >
          Please enter a valid username
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Enter your age</mat-label>
        <input matInput type="number" placeholder="2" formControlName="age" />
        <mat-error
          *ngIf="!signupForm.get('age').valid && signupForm.get('age').touched"
        >
          Age should be above 10 years old
        </mat-error>
      </mat-form-field>
      <br />
      <div class="radio-group">
        <label class="me-3">Gender : </label>
        <mat-radio-group formControlName="gender" class="radio">
          <mat-radio-button
            *ngFor="let gender of genders"
            [value]="gender"
            class="me-3"
            >{{ gender }}</mat-radio-button
          >
        </mat-radio-group>
      </div>
      <br />
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Enter your email</mat-label>
        <input
          matInput
          type="email"
          placeholder="dzaki@email.com"
          formControlName="email"
        />
        <mat-error
          *ngIf="
            !signupForm.get('email').valid && signupForm.get('email').touched
          "
        >
          Please enter a valid email
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Position</mat-label>
        <mat-select formControlName="position">
          <mat-option value="Front End">Front End</mat-option>
          <mat-option value="Back End">Back End</mat-option>
          <mat-option value="DevOps">DevOps</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Marital Status</mat-label>
        <mat-select formControlName="maritalStatus">
          <mat-option value="Married">Married</mat-option>
          <mat-option value="Single">Single</mat-option>
        </mat-select>
      </mat-form-field>

      <button class="btn btn-primary mt-4" type="button" (click)="onAddAddress()">
        Add Address
      </button>

      <div formArrayName="addresses">
        <div
          class="addressGroup"
          *ngFor="let addressInput of getAddressess.controls; let i = index"
          [formGroupName]="i"
        >
          <h3 class="mt-3">Address {{ i+1 }}</h3>
          <hr />
          <mat-form-field appearance="outline" class="form-group">
            <mat-label>Enter your Adress</mat-label>
            <input
              matInput
              type="text"
              placeholder="dzaki"
              formControlName="address"
            />
            <mat-error
              *ngIf="
                !signupForm.get('addresses').at(i).get('address').valid &&
                signupForm.get('addresses').at(i).get('address').touched
              "
            >
              Please enter a valid Address
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="form-group">
            <mat-label>Enter your zipcode</mat-label>
            <input
              matInput
              type="number"
              placeholder="2"
              formControlName="zipcode"
            />
            <mat-error
              *ngIf="
                !signupForm.get('addresses').at(i).get('zipcode').valid &&
                signupForm.get('addresses').at(i).get('zipcode').touched
              "
            >
              Please enter a valid zipcode
            </mat-error>
          </mat-form-field>
          <br />
          <mat-form-field appearance="outline" class="form-group">
            <mat-label>Enter your City</mat-label>
            <input
              matInput
              type="text"
              placeholder="dzaki"
              formControlName="city"
            />
            <mat-error
              *ngIf="
                !signupForm.get('addresses').at(i).get('city').valid &&
                signupForm.get('addresses').at(i).get('city').touched
              "
            >
              Please enter a valid City
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="form-group">
            <mat-label>Enter your Country</mat-label>
            <input
              matInput
              type="text"
              placeholder="dzaki"
              formControlName="country"
            />
            <mat-error
              *ngIf="
                !signupForm.get('addresses').at(i).get('country').valid &&
                signupForm.get('addresses').at(i).get('country').touched
              "
            >
              Please enter a valid Country
            </mat-error>
          </mat-form-field>
          <br />
          <button type="button" class="btn btn-danger" (click)="onDeleteAddresses(i)">Remove Addresses</button>
        </div>
      </div>
      
      <br />
      <button class="btn btn-primary mt-4" [disabled]="!signupForm.valid" type="submit">Submit</button>
    </form>
  </mat-card>
</div>
